#### [Оглавление](/docs/ru/index.md)

### Предыдущая страница: [Разворачивание deploy.json](/docs/ru/2_system_description/platform_configuration/deploy_registry.md)

# Настройка безопасности

## Автосоздание ролей

`createRole` - настройка разрешения автосоздания ролей для всех новых пользователей и групп (организаций например).

По умолчанию отключено. 

### Пример

```
"aclProvider": {
        "module": "core/impl/access/aclMetaMap",
        "options": {
          ...
          "map": {
            ...
            "organization@project-management": {
              "sidAttribute": "id",
              "createRole": true,
```

## Настройка динамической безопасности:

1. В `deploy.json` внедряем `aclMetaMap` и настраиваем на нем связи сущностей безопасности.
2. В `deploy.json` настраиваем логику динамического определения прав в `securedDataRepo`. Там карта - для нужных классов указываем какую роль получает пользователь по отношению к объекту этого класса, если в указанном атрибуте находится идентификатор безопасности относящийся к пользователю (определяется из п.1). В `resource` можно указать ресурс по отношению к которому будет проверяться доступ соответствующей роли. Если не указать `resource`, доступ будет проверяться к ресурсу класса (не безопасно).
3. Либо в админе, либо в импортируемой безопасности задаем права указанным в п.2 ролям на указанные в п.2 ресурсы (либо на классы).
4. Привязываем пользователей к персонам.
5. Даем пользователям роль имеющую доступ на чтение к нужным классам и узлам навигации.
6. Выполняем вход в систему под пользователем. В общем списке проектов, должны отображаться данные только в тех проектах, к которым пользователь имеет доступ согласно ролям. Остальные должны быть пустые.


**NB:** При указании динамической безопасности для роли - на объекты перестает действовать разрешение на чтение выданное на уровне класса, т.е. теперь оно будет определяться только динамически. Чтение на класс в этом случае разрешает только запросить список объектов класса.

### Пример:

```
...
"securedDataRepo": {
        "options": {
          "accessManager": "ion://roleAccessManager",
          "roleMap": {
            "task@project-management": {
              "PROJECT_CURATOR": {
                "caption": "Куратор проекта",
                "resource": {
                  "id": "pm::project-tasks",
                  "caption": "Задачи проекта"
                },
                "attribute": "project.curator.id"
              }
            }
          }
        }
      }
...
```

### Следующая страница: [Настройки для всех модулей проекта](/docs/ru/2_system_description/platform_configuration/deploy_modules.md)

--------------------------------------------------------------------------  


 #### [Licence](/LICENCE.md) &ensp;  [Contact us](https://iondv.com) &ensp;  [English](/docs/en/2_system_description/platform_configuration/deploy_security.md)   &ensp; [FAQs](/faqs.md) 
 
 --------------------------------------------------------------------------  

Copyright (c) 2018 **LLC "ION DV"**.  
All rights reserved. 