## Настройка безопасности
### createRole - Настройка разрешения автосоздания ролей для всех новых пользователей и групп (организаций например)
Источник IONCORE-420.

По умолчанию отключено. 

```json
"aclProvider": {
        "module": "core/impl/access/aclMetaMap",
        "options": {
          ...
          "map": {
            ...
            "organization@project-management": {
              "sidAttribute": "id",
              "createRole": true,
```

### Логика настройки динамической безопасности:

1. В deploy.json инжектируем aclMetaMap и настраиваем на нем связи сущностей безопасности
2. В deploy.json настраиваем логику динамического определения прав в securedDataRepo. Там карта - для нужных классов указываем какую роль получает юзер по отношению к объекту этого класса, если в указанном атрибуте находится идентификатор безопасности относящийся к пользователю (определяется из п.1). В resource можно указать ресурс по отношению к которому будет проверяться доступ соответствующей роли. Если не указать resource, доступ будет проверяться к ресурсу класса (что не очень безопасно)
3. Либо в админке, либо в импортируемой безопасности задаем права указанным в п.2 ролям на указанные в п.2 ресурсы (либо на классы)
4. Привязываем пользователей к персонам
5. Даем пользователям роль имеющую доступ на чтение к нужным классам и узлам навигации
6. Выполняем вход в систему под пользователем - в общем списке проектов, ему должны отображаться данные только в тех проектах, к которым он имеет доступ согласно ролей. Остальные должны быть пустые. ВНИМАНИЕ!!! 

```
NB. При указании динамической безопасности для роли - на объекты перестает действовать разрешение на чтение выданное на уровне класса, т.е. теперь оно будет определяться только динамически. Чтение на класс в этом случае разрешает только запросить список объектов класса.
```
 *пример:*

```json
...
"securedDataRepo": {
        "options": {
          "accessManager": "ion://roleAccessManager",
          "roleMap": {
            "task@project-management": {
              "PROJECT_CURATOR": {
                "caption": "Куратор проекта",
                "resource": {
                  "id": "pm::project-tasks",
                  "caption": "Задачи проекта"
                },
                "attribute": "project.curator.id"
              }
            }
          }
        }
      }
...
```