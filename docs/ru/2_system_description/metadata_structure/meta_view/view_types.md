# Мета представлений - атрибутивная часть

Атрибутивная часть меты представлений описывает поля представления атрибута класса. Представления атрибутов содержатся в виде массивов в соответствующих полях основной части меты представлений. Представление каждого атрибута - это объект следующей структуры:

## JSON
### Для меты представлений создания и изменения
```
    {
      "caption": "Редактор целых чисел [14]",
      "type": 14,
      "property": "integer_integer",
      "size": 2,
      "maskName": null,
      "mask": null,
      "mode": null,
      "fields": [],
      "hierarchyAttributes": null,
      "columns": [],
      "actions": null,
      "commands": [],
      "orderNumber": 20,
      "required": false,
      "visibility": null,
      "enablement": null,
      "obligation": null,
      "readonly": false,
      "selectionPaginated": true,
      "validators": null,
      "hint": "",
      "historyDisplayMode": 0,
      "tags": null
    }
```
### Для представления списка объектов
```
    {
      `"sorted": true,`
      "caption": "Редактор целых чисел [14]",
      "type": 14,
      "property": "integer_integer",
      "size": 2,
      "maskName": null,
      "mask": null,
      "mode": null,
      "fields": [],
      "hierarchyAttributes": null,
      "columns": [],
      "actions": null,
      "commands": [],
      "orderNumber": 20,
      "required": false,
      "visibility": null,
      "enablement": null,
      "obligation": null,
      "readonly": false,
      "selectionPaginated": true,
      "validators": null,
      "hint": "",
      "historyDisplayMode": 0,
      "tags": null
    }
```
## Описание полей

| Поле                    | Наименование в студии          | Допустимые значения                          | Описание                                                                                                                                                                              |
|:------------------------|:-------------------------------|:---------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `"sorted"`              | **Разрешена сортировка**       | Логическое                                   | Поле для представлений списка. Не используется в представлениях создания и изменения. Разрешает или запрещает сортировку по данному столбцу.                                          |
| `"caption"`             | **Заголовок**                  | Строка                                       | Заголовок поля ввода/колонки атрибута отображаемый в представлениях.                                                                                                                  |
| `"type"`                | **Тип**                        | Целое - идентификатор (код) типа             | Тип представленияя атрибута. [Подробнее](metadata/view-types).                                                                                                                        |
| `"property"`            | **Атрибут**                    | Строка, только латиница без пробелов         | Указывается имя атрибута, с которым будет работать система, а значит не может быть пустым (Кроме типа представления Группа [0]).                                                      |
| `"size"`                | **Размер**                     | Целое - код размера поля ввода, типозависимо | Позволяет указать код размера поля для разных типов атрибута/представления. константы в платформе [FieldSizes](https://git.iondv.ru/ION/platform/blob/master/core/FieldSizes.js)                                                                                                            |
| `"maskName"`            | **Имя маски**                  | Строка                                       | При наличии в платформе предустановленных масок - можно задать маску по внутреннему имени, указав его в данном поле [Подробнее](metadata/mask).                                       |
| `"mask"`                | **Маска**                      | Строка                                       | Позволяет ограничить допустимые значения атрибута. [Подробнее](metadata/mask).                                                                                                        |
| `"mode"`                | **Режим отображения**          | Целое - код режима отображения               | В ряде случаев бывает необходимо отображать данные атрибута по разному, как будем отображать - указывается в этом поле. [Пример использования](metadata/geodata).                     |
| `"fields"`              | **Поля**                       | Массив объектов                              | Позволяет сформировать представление создания/изменения особым образом. [Подробнее](metadata/fields).                                                                                 |
| `"hierarchyAttributes"` | **Иерархия по**                | объект или Null                                             | _не используется в текущей версии_                                                                                                                                                                        |
| `"columns"`             | **Столбцы**                    | Массив объектов                                             | Применяется для атрибутов типа "Коллекция [3]". Позволяет выбрать атрибуты для отображения на форме представления в виде колонок таблицы (атрибуты берутся из класса по ссылке)                                                                                                                                                                    |
| `"actions"`             | **Поведение**                  | Целое или Null                                             | _не используется в данной версии_                                                                                                                                                                        |
| `"commands"`            | **Действия**                   | Массив объектов либо Null                    | Описывает допустимые действия (групповые действия) над объектами ссылочного поля. Null для дефолтного набора действий. [Подробнее](metadata/commands).                                |
| `"orderNumber"`        | **Порядковый номер**           | Целое неотрицательное                        | Порядковый номер атрибута задает расположение атрибута относительно других атрибутов этого же класса в пользовательском интерфейсе.                                                   |
| `"required"`            | **Обязательное**               | Логическое                                   | Определяет обязательно ли заполнение данного атрибута при создании/изменении объекта.                                                                                                 |
| `"visibility"`          | **Условие отображения**        | Строка                                       | Задает условие отображения поля в представлении. [Подробнее](metadata/visibility).                                                                                                    |
| `"enablement"`          | **Условие активности**         | Строка                                       | Задает условие активности (доступности для редактирования) поля в представлении с форматом, аналогичным  [условиям отображения](metadata/visibility) |
| `"obligation"`          | **Условие обязательности**     | Строка                                       | Задает условие обязательности заполнения поля в представлении с форматом, аналогичным  [условиям отображения](metadata/visibility)                    |
| `"readonly"`            | **Только чтение**              | Логическое                                   | Разрешает или запрещает изменять значение атрибута в данном представлении.                                                                                                            |
| `"selectionPaginated"` | **Постраничный список выбора** | Логическое                                   | Разрешает или запрещает постраничный список выбора.                                                                                                                                   |
| `"validators"`          | **Валидаторы**                 | Строка                                       | Наименование валидатора, проверяющего введенные в поле атрибута значения. [Подробнее](metadata/validators).                                                                           |
| `"hint"`                | **Подсказка**                  | Строка                                       | Задает (или переопределяет заданное в поле `"hint"` меты атрибута) сообщение, которые выведется в пользовательском интерфейсе рядом с именем атрибута.                                |
| `"historyDisplayMode"`  | **Отображение истории**        | Целое                                        | Предполагаю, что нужно указывать формат отображения истории изменения объектов                                                                                                                                                                        |
| `"tags"`                | **Теги**                       | Массив строк                                 | Предполагается использование данного поля для хранения модификаторов отображения и прочей служебной информации. пример: https://git.iondv.ru/ION-METADATA/khv-svyaz-info/blob/develop/views/adminTerritory/item.json (для атрибута "Координаты" автоматически отображает значение атрибута "address" на форме гео-координат) [Подробнее] (metadata/tags).                                                                     |

  
## Структура в mongoDB (registry) для представлений списка
```
       {
            "sorted" : true,
            "caption" : "Редактор целых чисел [14]",
            "type" : 14,
            "property" : "integer_integer",
            "size" : 2,
            "maskName" : null,
            "mask" : null,
            "mode" : null,
            "fields" : [],
            "hierarchyAttributes" : null,
            "columns" : [],
            "actions" : null,
            "commands" : [],
            "orderNumber" : 20,
            "required" : false,
            "visibility" : null,
            "enablement" : null,
            "obligation" : null,
            "readonly" : false,
            "selectionPaginated" : true,
            "validators" : null,
            "hint" : "",
            "historyDisplayMode" : 0,
            "tags" : null
        }
```
Структура атрибута для представлений создания и изменения отличается лишь отсутствием поля `"sorted"`.
