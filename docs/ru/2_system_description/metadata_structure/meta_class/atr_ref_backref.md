### Предыдущая страница []()
# Ссылки
## Общее описание

Ссылка - тип данных, который хранит в себе ссылку на другой объект. Данный объект может быть объектом исходного класса, если ссылка ссылается на класс, в котором она определена.
Значение в поле атрибута типа "Ссылка" выводятся в соответствии с семантикой, указанной для класса по ссылке. Главное отличие от типа "Коллекция" в том, что в поле атрибута типа "Ссылка" может отображаться и храниться только один объект класса по ссылке. Например класс "Почтовые отделения" содержит в себе  атрибут с типом "Ссылка" (Населенный пункт), который в свою очередь ссылается на соответствующий наименованию справочник (класс "Населенные пункты"), в поле такого атрибута будет храниться только одно значение из класса по ссылке. То есть в каждом объекте класса "Почтовые отделения" будет отображаться список почтовых отделений для одного определенного 
населенного пункта.
Значение ссылки хранится строкой в базе.   
Возможность замены объекта по обратной ссылке определяется параметром `nullable` связывающего ссылочного атрибута. При замене объекта связь будет потеряна, поэтому реализован вывод варнинга, что объект по ссылке будет удален при попытке изменить связь из коллекции с обратной ссылкой.

**При указании класса-родителя есть возможность создавать объекты родительского и дочерних классов**

**Ссылки вместе с объектом грузятся по семантике, заданной в мете класса-ссылки или атрибута-ссылки.**

### Способы задания ссылок с точки зрения используемых полей атрибутивной части меты классов:
1. `один-к-одному` - есть ссылка, есть вложенный объект со ссылкой-связкой на исходный объект. В ссылке объявляем ссылку-связку, у нее указываем ссылочный атрибут вложенного объекта по которому формируется связь. Обязательно в атрибуте-ссылке указываем свойство уникальности истинным (true). __См. Обратные ссылки в контексте ссылок.__ 
2. `один-ко-многим` - определяем ссылку, и указываем класс вложенного элемента - связи создаются явно при помещении в ссылку и хранятся как отдельная сущность в БД. __См. Ссылки.__

## Атрибут "Ссылка" в формате JSON (мета атрибута-ссылки)

Пример

```
{
      "orderNumber": 20,
      "name": "ssylka",
      "caption": "Ссылка",
      "type": 13,
      "size": null,
      "decimals": 0,
      "allowedFileTypes": null,
      "maxFileCount": 0,
      "nullable": true,
      "readonly": false,
      "indexed": false,
      "unique": false,
      "autoassigned": false,
      "hint": null,
      "defaultValue": null,
      "refClass": "collRefCatalog@develop-and-test",
      "itemsClass": "",
      "backRef": "",
      "backColl": "",
      "binding": "",
      "semantic": null,
      "selConditions": [],
      "selSorting": [],
      "selectionProvider": null,
      "indexSearch": false,
      "eagerLoading": false,
      "formula": null
    }
```  

### *Обязательно* 
- `"type": 13` - тип атрибута "Ссылка"
- `"refClass"` - название класса, объекты которого могут хранить свои идентификаторы в ссылке и, таким образом, формировать связь к объекту по идентификатору.  

[Пример класса, содержащего ссылку] (http://dev.dnt.local/registry/develop-and-test@classRef.classRef)

# Обратные ссылки в контексте ссылок
## Отличие от обычной ссылки

Обратная ссылка в контексте ссылок получается следующим образом:
- Создается обычная ссылка с указанием ссылочного класса
- В ссылочном классе должен быть атрибут-ссылка, ссылающийся на исходный класс и имеющий свойство `unique` равным `true`
- В исходном классе в обычной ссылке заполняем свойство `"backRef"` - туда записвается код атрибута-ссылки из ссылочного класса

## Атрибут "Обратная ссылка" в формате JSON (мета атрибута обратной ссылки в контексте ссылок)

Пример

```
{
      "orderNumber": 30,
      "name": "backref",
      "caption": "Обратная ссылка",
      "type": 13,
      "size": null,
      "decimals": 0,
      "allowedFileTypes": null,
      "maxFileCount": 0,
      "nullable": true,
      "readonly": false,
      "indexed": false,
      "unique": false,
      "autoassigned": false,
      "hint": null,
      "defaultValue": null,
      "refClass": "otorbrRef@develop-and-test",
      "itemsClass": "",
      "backRef": "ref",
      "backColl": "",
      "binding": "",
      "semantic": "data",
      "selConditions": [],
      "selSorting": [],
      "selectionProvider": null,
      "indexSearch": false,
      "eagerLoading": true,
      "formula": null
    }
```  

### *Обязательно* 
- `"type": 13` - тип атрибута "Ссылка"
- `"refClass"` - название класса, объекты которого могут хранить свои идентификаторы в ссылке и, таким образом, формировать связь к объекту по идентификатору.
- `"backRef"` - атрибута-ссылка из ссылочного класса, указанного в `"refClass"`

[Пример класса, содержащего обратную ссылку в контексте ссылок] (http://dev.dnt.local/registry/develop-and-test@classRef.references.ref)

### Следующая страница []()
--------------------------------------------------------------------------  


 #### [Licence](/LICENCE.md) &ensp;  [Contact us](https://iondv.com) &ensp;  [English](/README.md)   &ensp; [FAQs](/faqs.md)          



--------------------------------------------------------------------------  

Copyright (c) 2018 **LLC "ION DV"**.
All rights reserved. 