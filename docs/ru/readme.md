# IONDV. Framework 

![logoIONdv](/docs/ru/images/iondv_logo.png)  

This page in [English](/README.md/)

## Описание 
**IONDV.Framework** — фреймворк по созданию высокоуровневых веб-приложений на основе метаданных, в том числе без программирования. При этом фреймворк предусматривает изменение функциональности с помощью дополнительных готовых компонентов или написания собственных. 

**Типичные приложения**:
* система управления проектами предприятия;
* реестры учета и обработки данных на основе бизнес-процессов;
* CRM - система управления отношениями с клиентами.

Преимуществами IONDV.Framework являются открытый исходный код на JavaScript и открытая структура метаданных в человекочитаемом формате в формате JSON.


## Функциональные возможности  

* создание произвольных многопользовательских систем учета данных
* распределение доступа и безопасность данных
* управление данными на основе бизнес-процессов
* формирование отчетов и аналитики
* возможность визуализации данных на геослое
* возможность произвольного представления данных в виде портальных форм
* простая интеграция данных по REST и SOAP 

## Быстрый старт с использованием репозитория

Вы можете посмотреть собранные приложения, развернутые в облаке или получить продукты для изучения другим способом на [сайте фреймворка](https://iondv.com), в том числе:
* инсталятор для операционной системы Windows
* архив с собранным приложением
* docker-контейнер с собранным приложением

### Cистемное окружение

Запуск фреймворка осуществляется в среде [Node.js](<https://nodejs.org/en/>) версии 10.x.x.

Для хранения данных необходимо установить и запустить [MongoDb](https://www.mongodb.org/) версии 3.6.

### Глобальные зависимости

Для сборки компонентов и библиотек фреймворка необходимо установить глобально:
* пакет [node-gyp](<https://github.com/nodejs/node-gyp>) `npm install -g node-gyp`. Для работы библиотеки под операционной системой семейства windows дополнительно необходимо установить пакет windows-build-tools `npm install -g --production windows-build-tools`.
* пакет сборщика проектов [Gulp](<http://gulpjs.com/>) `npm install -g gulp@3.9.1`. `3.9.1` - поддерживаемая версия `Gulp`.
* менджер пакетов фронтенд библиотек [Bower](<https://bower.io>) `npm install -g bower`.

### Установка ядра, модулей и приложения

Рассматриваем на примере приложения `develop-and-test`. Находим приложение в репозитории.   
Смотрим зависимости указаные в файле `package.json`.   

```
   "engines": {
    "ion": "1.24.1"
  },
  "ionModulesDependencies": {
    "registry": "1.27.1",
    "geomap": "1.5.0",
    "graph": "1.3.2",
    "portal": "1.3.0",
    "report": "1.9.2",
    "ionadmin": "1.4.0",
    "dashboard": "1.1.0",
    "lk": "1.0.1",
    "soap": "1.1.2",
    "gantt-chart": "0.8.0"
  },
  "ionMetaDependencies": {
    "viewlib": "0.9.1"
    "viewlib-extra": "0.1.0"

```
* Начинаем установку с ядра, версия которого указана в парметре `engines": {"ion": "1.24.1"}`. Скопируйте адрес репозитория ядра и в командной строке выполните комманду `git clone https://github.com/iondv/framework`. Перейдите в папку ядра, переключитесь на tag номера версии `git checkout tags/v1.24.1`.
* После этого устанавливаются необходимые для приложения модули, указанные в параметре `"ionModulesDependencies"`. Модули устанавливаются в папку `modules` ядра, для этого пейдите в неё командой `cd modules`. Клонируем модули из списка `"ionModulesDependencies"`, для модуля registry это осуществляется коммандой `git clone https://github.com/iondv/registry`. Перейдите в папку установленного модуля, переключитесь на tag номера версии `git checkout tags/v1.27.1`. Повторите для каждого модуля.
* Установка самого приложения осуществляется в папку `applications`, для этого перейдите в неё командой  `cd ..\applications`, если вы находитесь в папке модулей. Установку выполните клонированием репозитория коммандой `git clone https://github.com/iondv/develop-and-test`. Перейдите в папку установленного приложения, переключитесь на tag номера версии `git checkout tags/v1.17.0`
* После этого установите дополнительно необходимые приложения из параметра `"ionMetaDependencies"`. Установка осуществляется в папку `applications`, для установки необходимо убедиться, что находитесь в папке приложений. Клонируем приложения из списка в параметре  `"ionMetaDependencies"`, для приложения `viewlib` осуществляется командой `https://github.com/iondv/viewlib`.  Перейдите в папку установленного приложения, переключитесь на tag номера версии `git checkout tags/v0.9.1`. Повторите для каждого приложения.

### Сборка, конфигрурирование и развертывание приложения

Сборка приложения обеспечивает установку всех зависимых библиотек, импорт данных в базу данных и подготовку приложения для запуска.  

Создайте конфигурационный файл `setup.ini`  в папке `config` ядра для задания основных параметров окружения приложения. 

```
auth.denyTop=false 
auth.registration=false 
auth.exclude[]=/files/**
auth.exclude[]=/images/**
db.uri=mongodb://127.0.0.1:27017/db
db.user=username
db.pwd=password
server.ports[]=8888
server.ports[]=8889
server.ports[]=3000
module.default=registry
module.skip[]=offline-sync
fs.storageRoot=./files
fs.urlBase=/files

```
Открываем файл в редакторе и вставляем содержимое. Самый главный параметр `db.uri=mongodb://127.0.0.1:27017/ion-dnt` он указывает на название базы которую мы будем использовать для приложения. База данных будет создана автоматически.  

Задайте переменную окружения NODE_PATH равной пути к ядру приложения следующей командой `set NODE_PATH=c:\workspace\dnt` для Windows и `export NODE_PATH=/workspace/dnt` для Linux, где `workspace\dnt` - папка файлов ядра приложения.    

При первом запуске необходимо выполнить `npm install` - она поставит ключевые зависимости, в том числе локально сборщик `gulp`. Убедитесь, что версия `Gulp` - `3.9.1`.

Выполните импорт меты приложения командой `node bin\import --src C:\workspace\framework\applications\develop-and-test --ns develop-and-test`.

Далее выполните команду сборки приложения `gulp assemble`. 

Добавьте пользователя admin с паролем 123 командой `node bin\adduser.js --name admin --pwd 123`.

Добавьте пользователю права администратора командой `node bin\acl.js --u admin@local --role admin --p full`.

### Запуск

Запустите приложение командой в папке ядра `npm start`. 

Откройте браузер с адресом `http://localhost:8888` и авторизуйтесь в приложении , где `8888` - порт указанный в параметре server.ports конфигурации запуска.

## Документация 

Документация по платформе IONDV.Framework доступна на двух языках  - [русский](/docs/ru/index.md) и [english](/docs/en/index.md).

## Ссылки

Ниже представлены ссылки на дополнительную информацию по разработке приложений с использованием IONDV.Framework.
* [Руководство пользователя](/docs/ru/manuals/user_manual.md)
* [Руководство разработчика](/docs/ru/manuals/dev_manual.md)
* [Домашняя страница фреймворка](https://iondv.com/)
* Обратная связь на [stack overflow](https://stackoverflow.com/questions/tagged/iondv)


--------------------------------------------------------------------------  


 #### [Licence](/LICENCE.md) &ensp;  [Contact us](https://iondv.com) &ensp;  [English](/README.md)   &ensp; [FAQs](/faqs.md)          



--------------------------------------------------------------------------  

Copyright (c) 2018 **LLC "ION DV"**.  
All rights reserved. 


